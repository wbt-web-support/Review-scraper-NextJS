<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReviewHub V2 - Improved Carousel Pagination Test</title>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8fafc;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #1f2937;
            margin-bottom: 30px;
            text-align: center;
        }
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
        }
        .test-section h2 {
            color: #374151;
            margin-bottom: 15px;
        }
        .description {
            color: #6b7280;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        .instructions {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .instructions h3 {
            color: #92400e;
            margin-top: 0;
            margin-bottom: 10px;
        }
        .instructions ol {
            color: #92400e;
            margin: 0;
            padding-left: 20px;
        }
        .instructions li {
            margin-bottom: 5px;
        }
        .debug-panel {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: monospace;
            font-size: 12px;
        }
        .debug-panel h3 {
            margin-top: 0;
            color: #374151;
        }
        .debug-log {
            background: #1f2937;
            color: #f9fafb;
            padding: 10px;
            border-radius: 4px;
            max-height: 200px;
            overflow-y: auto;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ReviewHub V2 - Improved Carousel Pagination Test</h1>
        
        <div class="instructions">
            <h3>üß™ Test Instructions:</h3>
            <ol>
                <li><strong>Initial Load:</strong> The carousel should load with only 12 reviews initially</li>
                <li><strong>Navigation:</strong> Use the arrow buttons or swipe to navigate through reviews</li>
                <li><strong>Auto-Fetch Trigger:</strong> When you're 2 slides away from the end, it should automatically fetch 8 more reviews</li>
                <li><strong>Check Console:</strong> Open browser console (F12) to see detailed logs</li>
                <li><strong>Expected Behavior:</strong> No "Load More" button - reviews load seamlessly as you navigate</li>
            </ol>
        </div>
        
        <div class="debug-panel">
            <h3>üîç Debug Information</h3>
            <div>Widget ID: <strong>6832c330dd506564ff9d8b8d</strong></div>
            <div>Expected Initial Reviews: <strong>12</strong></div>
            <div>Auto-Fetch Trigger: <strong>2 slides from end</strong></div>
            <div>Fetch Increment: <strong>8 reviews</strong></div>
            <div>Status: <span id="status">Initializing...</span></div>
        </div>
        
        <div class="test-section">
            <h2>Auto-Fetching Carousel</h2>
            <div class="description">
                This carousel will automatically fetch more reviews when you approach the end (2 slides away from the end).
                No "Load More" button needed - just navigate through the reviews and new ones will be loaded seamlessly.
            </div>
            <div id="auto-fetch-carousel"></div>
        </div>
        
        <div class="debug-panel">
            <h3>üìã Recent Logs</h3>
            <div class="debug-log" id="debug-log">Waiting for logs...</div>
        </div>
    </div>

    <!-- ReviewHub V2 Widget Script -->
    <script 
        src="widget-new.js" 
        data-reviewhub-widget-id="6832c330dd506564ff9d8b8d"
        data-container-id="auto-fetch-carousel"
        data-autoplay="false"
        data-autoplay-delay="4000"
        data-loop="true"
        data-show-ratings="true"
        data-show-dates="true"
        data-show-avatars="true"
        data-cards-desktop="4"
        data-cards-tablet="3"
        data-cards-foldable="2"
        data-cards-mobile="1">
    </script>

    <script>
        // Debug logging setup
        console.log('ReviewHub V2 Carousel Pagination Test Loaded');
        
        const debugLog = document.getElementById('debug-log');
        const statusEl = document.getElementById('status');
        
        // Capture all console logs
        const originalLog = console.log;
        const logs = [];
        
        function addToDebugLog(message) {
            if (debugLog) {
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = document.createElement('div');
                logEntry.textContent = `[${timestamp}] ${message}`;
                debugLog.appendChild(logEntry);
                
                // Keep only last 20 logs
                while (debugLog.children.length > 20) {
                    debugLog.removeChild(debugLog.firstChild);
                }
                
                // Auto-scroll to bottom
                debugLog.scrollTop = debugLog.scrollHeight;
            }
        }
        
        console.log = function(...args) {
            const message = args.join(' ');
            logs.push(message);
            originalLog.apply(console, args);
            
            // Update status
            if (statusEl) {
                statusEl.textContent = message.substring(0, 50) + (message.length > 50 ? '...' : '');
            }
            
            // Add to debug panel
            addToDebugLog(message);
            
            // Highlight auto-fetch events
            if (message.includes('üìä Auto-fetched') || message.includes('üöÄ Auto-fetch triggered')) {
                console.info('üéâ AUTO-FETCH EVENT DETECTED:', message);
            }
        };
        
        // Monitor for specific events
        setTimeout(() => {
            console.log('üîç Test started - navigate through reviews to trigger auto-fetch');
        }, 2000);
    </script>
</body>
</html>
